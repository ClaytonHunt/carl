$schema: "http://json-schema.org/draft-07/schema#"
title: "CARL Vision File Schema"
description: "Schema for .vision.carl files - Long-term strategic direction (1-3 years)"
type: object
additionalProperties: false

required:
  - id
  - name
  - status
  - vision_statement
  - strategic_goals
  - target_outcomes
  - success_metrics
  - roadmaps
  - constraints
  - timeline

properties:
  id:
    type: string
    pattern: "^[a-z][a-z0-9_]*[a-z0-9]$"
    description: "Unique identifier in snake_case format"
    
  name:
    type: string
    minLength: 1
    maxLength: 100
    description: "Human readable name for the vision"
    
  status:
    type: string
    enum: ["draft", "active", "in_progress", "achieved", "superseded"]
    description: "Current status of the vision"
    
  vision_statement:
    type: string
    minLength: 50
    maxLength: 500
    description: "Clear, compelling statement of the desired future state"
    
  strategic_goals:
    type: array
    items:
      type: object
      additionalProperties: false
      required: ["goal", "rationale", "priority"]
      properties:
        goal:
          type: string
          minLength: 10
          description: "Specific strategic goal"
        rationale:
          type: string
          minLength: 20
          description: "Why this goal matters"
        priority:
          type: string
          enum: ["critical", "high", "medium", "low"]
          description: "Strategic priority level"
    minItems: 3
    maxItems: 7
    description: "Key strategic goals to achieve the vision"
    
  target_outcomes:
    type: array
    items:
      type: object
      additionalProperties: false
      required: ["outcome", "business_impact", "user_benefit"]
      properties:
        outcome:
          type: string
          minLength: 10
          description: "Desired outcome"
        business_impact:
          type: string
          minLength: 20
          description: "Expected business impact"
        user_benefit:
          type: string
          minLength: 20
          description: "How users will benefit"
    minItems: 3
    description: "Concrete outcomes that realize the vision"
    
  success_metrics:
    type: array
    items:
      type: object
      additionalProperties: false
      required: ["metric", "current_value", "target_value", "measurement_method"]
      properties:
        metric:
          type: string
          minLength: 5
          description: "What to measure"
        current_value:
          type: string
          description: "Current baseline value"
        target_value:
          type: string
          description: "Target value to achieve"
        measurement_method:
          type: string
          minLength: 10
          description: "How to measure this metric"
    minItems: 3
    description: "Quantifiable metrics to track vision progress"
    
  roadmaps:
    type: array
    items:
      type: object
      additionalProperties: false
      required: ["id", "status", "focus_area"]
      properties:
        id:
          type: string
          pattern: "^[a-z][a-z0-9_]*[a-z0-9]$"
          description: "Child roadmap ID in snake_case"
        status:
          type: string
          enum: ["pending", "active", "complete"]
          description: "Roadmap status"
        focus_area:
          type: string
          description: "Primary focus area of this roadmap"
    description: "Child roadmaps that implement this vision"
    
  constraints:
    type: object
    additionalProperties: false
    required: ["technical", "resource", "market"]
    properties:
      technical:
        type: array
        items:
          type: string
          minLength: 10
        description: "Technical constraints and limitations"
      resource:
        type: array
        items:
          type: string
          minLength: 10
        description: "Resource constraints (budget, team, time)"
      market:
        type: array
        items:
          type: string
          minLength: 10
        description: "Market constraints and competitive factors"
    description: "Known constraints that may impact vision achievement"
    
  timeline:
    type: object
    additionalProperties: false
    required: ["start_date", "target_date", "review_frequency"]
    properties:
      start_date:
        type: string
        pattern: "^\\d{4}-\\d{2}-\\d{2}$"
        description: "Vision start date in YYYY-MM-DD format"
      target_date:
        type: string
        pattern: "^\\d{4}-\\d{2}-\\d{2}$"
        description: "Target achievement date in YYYY-MM-DD format"
      review_frequency:
        type: string
        enum: ["quarterly", "bi-annual", "annual"]
        description: "How often to review and adjust the vision"
    description: "Vision timeline and review cadence"
    
  stakeholders:
    type: array
    items:
      type: object
      additionalProperties: false
      required: ["role", "interest", "influence"]
      properties:
        role:
          type: string
          description: "Stakeholder role or group"
        interest:
          type: string
          description: "What they care about"
        influence:
          type: string
          enum: ["high", "medium", "low"]
          description: "Level of influence on vision success"
    description: "Key stakeholders and their interests"
    
  assumptions:
    type: array
    items:
      type: string
      minLength: 20
    description: "Key assumptions underlying the vision"
    
  risks:
    type: array
    items:
      type: object
      additionalProperties: false
      required: ["risk", "impact", "likelihood", "mitigation"]
      properties:
        risk:
          type: string
          minLength: 10
          description: "Risk description"
        impact:
          type: string
          enum: ["critical", "high", "medium", "low"]
          description: "Potential impact if realized"
        likelihood:
          type: string
          enum: ["high", "medium", "low"]
          description: "Likelihood of occurrence"
        mitigation:
          type: string
          minLength: 20
          description: "Mitigation strategy"
    description: "Strategic risks to vision achievement"